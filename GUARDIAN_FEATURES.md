# å®ˆè­·è€…åŠŸèƒ½å®Œæ•´æŒ‡å—

## ğŸ›¡ï¸ æ¦‚è¿°

å®ˆè­·è€…ï¼ˆGuardianï¼‰æ˜¯ Voyager Universe ä¸­æ“æœ‰æœ€é«˜æ¬Šé™çš„ç”¨æˆ¶è§’è‰²ï¼Œè² è²¬ç¶­è­·æ•´å€‹æ•™å­¸ç”Ÿæ…‹ç³»çµ±çš„å¹³è¡¡èˆ‡ç§©åºã€‚æœ¬æ–‡æª”è©³ç´°èªªæ˜äº†ç‚ºå®ˆè­·è€…è§’è‰²å¯¦ç¾çš„æ‰€æœ‰ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ç®¡ç†æ§åˆ¶å° (`/admin`)
- **ä½ç½®**: `app/admin/page.tsx`
- **åŠŸèƒ½**: çµ±ä¸€çš„ç®¡ç†å…¥å£ï¼Œæä¾›ç³»çµ±æ¦‚è¦½å’Œå¿«é€Ÿè¨ªå•
- **ç‰¹è‰²**:
  - å³æ™‚ç³»çµ±çµ±è¨ˆæ•¸æ“š
  - å¿«é€Ÿæ“ä½œæŒ‰éˆ•
  - è¿‘æœŸæ´»å‹•è¨˜éŒ„
  - éŸ¿æ‡‰å¼è¨­è¨ˆ

### 2. ç”¨æˆ¶ç®¡ç† (`/admin/users`)
- **ä½ç½®**: `app/admin/users/page.tsx`
- **åŠŸèƒ½**: ç®¡ç†æ‰€æœ‰ç”¨æˆ¶å’Œè§’è‰²æå‡
- **ç‰¹è‰²**:
  - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶åˆ—è¡¨
  - æŒ‰è§’è‰²å’Œæ´»å‹•ç‹€æ…‹ç¯©é¸
  - ä¸€éµè§’è‰²æå‡åŠŸèƒ½
  - ç”¨æˆ¶æœç´¢å’Œæ’åº

### 3. ç¥è«­ç®¡ç† (`/admin/oracles`)
- **ä½ç½®**: `app/admin/oracles/page.tsx`
- **åŠŸèƒ½**: ç™¼å¸ƒå’Œç®¡ç†ç³»çµ±å…¬å‘Š
- **ç‰¹è‰²**:
  - å¤šç¨®ç¥è«­é¡å‹ï¼ˆå…¬å‘Šã€æŒ‡å°ã€è­¦å‘Šã€æ…¶ç¥ï¼‰
  - ç›®æ¨™è§’è‰²è¨­å®š
  - ç½®é ‚å’ŒéæœŸæ™‚é–“æ§åˆ¶
  - å¯Œæ–‡æœ¬å…§å®¹ç·¨è¼¯

### 4. åˆ†é¡ç®¡ç† (`/admin/categories`)
- **ä½ç½®**: `app/admin/categories/page.tsx`
- **åŠŸèƒ½**: ç®¡ç†èª²ç¨‹åˆ†é¡é«”ç³»
- **ç‰¹è‰²**:
  - å±¤æ¬¡åŒ–åˆ†é¡çµæ§‹
  - è‡ªå®šç¾©åœ–æ¨™å’Œé¡è‰²
  - çˆ¶å­åˆ†é¡é—œä¿‚
  - è¦–è¦ºåŒ–é è¦½

### 5. ç³»çµ±çµ±è¨ˆ (`/admin/analytics`)
- **ä½ç½®**: `app/admin/analytics/page.tsx`
- **åŠŸèƒ½**: æŸ¥çœ‹å¹³å°æ•¸æ“šåˆ†æ
- **ç‰¹è‰²**:
  - ç”¨æˆ¶å’Œèª²ç¨‹çµ±è¨ˆ
  - è§’è‰²åˆ†å¸ƒåœ–è¡¨
  - å¢é•·è¶¨å‹¢åˆ†æ
  - ç³»çµ±å¥åº·åº¦ç›£æ§

### 6. èª²ç¨‹ç®¡ç† (`/admin/courses`)
- **ä½ç½®**: `app/admin/courses/page.tsx`
- **åŠŸèƒ½**: ç®¡ç†æ‰€æœ‰èª²ç¨‹å…§å®¹
- **ç‰¹è‰²**:
  - èª²ç¨‹ç‹€æ…‹ç®¡ç†ï¼ˆå­µåŒ–ä¸­/å·²ç™¼å¸ƒ/å·²æ­¸æª”ï¼‰
  - æ‰¹é‡æ“ä½œåŠŸèƒ½
  - èª²ç¨‹å¯©æ ¸å’Œæ‰¹å‡†
  - çµ±è¨ˆä¿¡æ¯å±•ç¤º

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### æ¬Šé™æ§åˆ¶
```typescript
// ä½¿ç”¨ usePermissions é‰¤å­é€²è¡Œæ¬Šé™æª¢æŸ¥
const { canManageUsers, canCreateOracle, canManageCategories } = usePermissions();

// å®ˆè­·è€…å°ˆç”¨æ¬Šé™
- canManageUsers: true
- canCreateOracle: true  
- canManageCategories: true
- canViewAnalytics: true
```

### æ•¸æ“šåº«çµæ§‹
```sql
-- æ ¸å¿ƒè¡¨çµæ§‹
profiles (ç”¨æˆ¶æª”æ¡ˆ)
â”œâ”€â”€ role: archetype_role (guardian/luminary/catalyst/voyager)
â”œâ”€â”€ username, display_name, bio
â””â”€â”€ created_at, updated_at, last_seen_at

oracles (ç¥è«­ç³»çµ±)
â”œâ”€â”€ guardian_id â†’ profiles(id)
â”œâ”€â”€ title, content, type
â”œâ”€â”€ is_pinned, target_roles, expires_at
â””â”€â”€ created_at, updated_at

categories (åˆ†é¡é«”ç³»)
â”œâ”€â”€ name, description
â”œâ”€â”€ color, icon, parent_id
â””â”€â”€ created_at

courses (èª²ç¨‹ç®¡ç†)
â”œâ”€â”€ creator_id â†’ profiles(id)
â”œâ”€â”€ title, description, status
â”œâ”€â”€ enrollment_count, difficulty_level
â””â”€â”€ created_at, published_at
```

### RLS å®‰å…¨ç­–ç•¥
- **profiles**: æ‰€æœ‰äººå¯æŸ¥çœ‹ï¼Œç”¨æˆ¶å¯æ›´æ–°è‡ªå·±çš„æª”æ¡ˆ
- **oracles**: æ ¹æ“š target_roles é™åˆ¶æŸ¥çœ‹ï¼Œåªæœ‰å®ˆè­·è€…å¯ç®¡ç†
- **categories**: æ‰€æœ‰äººå¯æŸ¥çœ‹ï¼Œåªæœ‰å®ˆè­·è€…å¯ç®¡ç†
- **courses**: åŸºæ–¼ç‹€æ…‹å’Œå‰µå»ºè€…çš„æŸ¥çœ‹æ¬Šé™

## ğŸ”§ å®‰è£å’Œé…ç½®

### 1. æ•¸æ“šåº«è¨­ç½®
```bash
# åŸ·è¡Œæ•¸æ“šåº«å…¼å®¹æ€§æª¢æŸ¥è…³æœ¬
psql -d your_database -f scripts/guardian-features-db-check.sql
```

### 2. è§’è‰²æå‡
```sql
-- å°‡ç”¨æˆ¶æå‡ç‚ºå®ˆè­·è€…
UPDATE profiles 
SET role = 'guardian', updated_at = NOW() 
WHERE id = 'user_uuid';
```

### 3. ç’°å¢ƒè®Šæ•¸
ç¢ºä¿ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸æ­£ç¢ºé…ç½®ï¼š
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## ğŸ¨ UI/UX è¨­è¨ˆ

### è¨­è¨ˆåŸå‰‡
- **å”¤èµ·æ•¬ç•æ„Ÿ**: ä½¿ç”¨å®‡å®™ä¸»é¡Œå’Œæ˜Ÿç©ºèƒŒæ™¯
- **è¿½æ±‚ç„¡ç—•æ„Ÿ**: æµæš¢çš„äº¤äº’å’Œéæ¸¡æ•ˆæœ
- **ä¸€è‡´æ€§**: çµ±ä¸€çš„ cosmic è¨­è¨ˆèªè¨€

### çµ„ä»¶åº«
```css
/* æ ¸å¿ƒæ¨£å¼é¡ */
.cosmic-glass     /* ç»ç’ƒæ…‹æ•ˆæœ */
.cosmic-button    /* æŒ‰éˆ•æ¨£å¼ */
.cosmic-input     /* è¼¸å…¥æ¡†æ¨£å¼ */
.cosmic-loading   /* è¼‰å…¥å‹•ç•« */
```

### éŸ¿æ‡‰å¼è¨­è¨ˆ
- ç§»å‹•ç«¯å„ªåŒ–çš„å°èˆªèœå–®
- è‡ªé©æ‡‰çš„è¡¨æ ¼å’Œå¡ç‰‡å¸ƒå±€
- è§¸æ‘¸å‹å¥½çš„äº¤äº’å…ƒç´ 

## ğŸ”’ å®‰å…¨è€ƒé‡

### æ¬Šé™é©—è­‰
- å‰ç«¯å’Œå¾Œç«¯é›™é‡æ¬Šé™æª¢æŸ¥
- åŸºæ–¼ JWT çš„èº«ä»½é©—è­‰
- RLS ç­–ç•¥ä¿è­·æ•¸æ“šåº«æ“ä½œ

### æ•¸æ“šä¿è­·
- æ•æ„Ÿæ“ä½œéœ€è¦ç¢ºèªæç¤º
- è»Ÿåˆªé™¤æ©Ÿåˆ¶ä¿è­·é‡è¦æ•¸æ“š
- æ“ä½œæ—¥èªŒè¨˜éŒ„ï¼ˆè¦åŠƒä¸­ï¼‰

## ğŸ“± ä½¿ç”¨æŒ‡å—

### æˆç‚ºå®ˆè­·è€…
1. è¨»å†Šæ™®é€šé¥è¡Œè€…å¸³è™Ÿ
2. è¯ç¹«ç¾æœ‰å®ˆè­·è€…æå‡è§’è‰²
3. æˆ–ä½¿ç”¨æ•¸æ“šåº«ç›´æ¥æ›´æ–°è§’è‰²

### è¨ªå•ç®¡ç†åŠŸèƒ½
1. ç™»å…¥å®ˆè­·è€…å¸³è™Ÿ
2. é»æ“Šå°èˆªæ¬„çš„ã€Œç®¡ç†æ§åˆ¶å°ã€
3. é¸æ“‡éœ€è¦çš„ç®¡ç†åŠŸèƒ½

### æ—¥å¸¸ç®¡ç†ä»»å‹™
- **æ¯æ—¥**: æª¢æŸ¥ç³»çµ±çµ±è¨ˆå’Œç”¨æˆ¶æ´»å‹•
- **æ¯é€±**: å¯©æ ¸æ–°èª²ç¨‹å’Œè™•ç†ç”¨æˆ¶åé¥‹
- **æ¯æœˆ**: æ›´æ–°åˆ†é¡çµæ§‹å’Œç™¼å¸ƒé‡è¦ç¥è«­

## ğŸš€ åŠŸèƒ½æ“´å±•

### è¦åŠƒä¸­çš„åŠŸèƒ½
- æ“ä½œæ—¥èªŒå’Œå¯©è¨ˆè¿½è¹¤
- æ‰¹é‡ç”¨æˆ¶æ“ä½œ
- è‡ªå‹•åŒ–å¯©æ ¸è¦å‰‡
- æ•¸æ“šå°å‡ºåŠŸèƒ½
- éƒµä»¶é€šçŸ¥ç³»çµ±

### è‡ªå®šç¾©é–‹ç™¼
æ‰€æœ‰çµ„ä»¶éƒ½æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œå¯ä»¥è¼•é¬†ï¼š
- æ·»åŠ æ–°çš„ç®¡ç†é é¢
- æ“´å±•ç¾æœ‰åŠŸèƒ½
- è‡ªå®šç¾©æ¬Šé™è¦å‰‡
- æ•´åˆç¬¬ä¸‰æ–¹æœå‹™

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **æ¬Šé™ä¸è¶³éŒ¯èª¤**
   - æª¢æŸ¥ç”¨æˆ¶è§’è‰²æ˜¯å¦ç‚º guardian
   - ç¢ºèª RLS ç­–ç•¥é…ç½®æ­£ç¢º

2. **æ•¸æ“šè¼‰å…¥å¤±æ•—**
   - æª¢æŸ¥ Supabase é€£æ¥
   - ç¢ºèªè¡¨çµæ§‹å®Œæ•´

3. **æ“ä½œå¤±æ•—**
   - æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤
   - æª¢æŸ¥ç¶²çµ¡é€£æ¥

### èª¿è©¦å·¥å…·
- ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·
- Supabase æ§åˆ¶å°æ—¥èªŒ
- `/simple-supabase-test` é€£æ¥æ¸¬è©¦é é¢

## ğŸ“ æ”¯æŒ

### æŠ€è¡“æ”¯æŒ
- æŸ¥çœ‹é …ç›® README.md
- æª¢æŸ¥ GitHub Issues
- è¯ç¹«é–‹ç™¼åœ˜éšŠ

### ç¤¾ç¾¤æ”¯æŒ
- é¥è¡Œè€…ç¤¾ç¾¤è¨è«–
- çŸ¥è­˜åˆ†äº«æœƒ
- æœ€ä½³å¯¦è¸äº¤æµ

---

**æ³¨æ„**: å®ˆè­·è€…è§’è‰²æ“æœ‰ç³»çµ±æœ€é«˜æ¬Šé™ï¼Œè«‹è¬¹æ…ä½¿ç”¨æ‰€æœ‰ç®¡ç†åŠŸèƒ½ï¼Œç¢ºä¿æ•™å­¸ç”Ÿæ…‹ç³»çµ±çš„ç©©å®šé‹è¡Œã€‚